# Build memory (Arete project)

Index of significant changes to **Arete’s build, tooling, and architecture**. Detail lives in dated entries; this file is the index.

> **Note**: Paths in entries before 2026-02-09 reference pre-reorganization structure (`.cursor/build/` = now `dev/`).

- **USER.md** (gitignored): User-specific context — copy from `USER.md.example`.
- **Entries**: `memory/entries/YYYY-MM-DD_short-title.md` — one file per change or decision. Include a **Learnings** section for collaboration observations, builder preferences, and working patterns.
- **Collaboration**: `memory/collaboration.md` — synthesized profile of how to work with the builder, derived from Learnings in entries. Injected into new build conversations for immediate context.

## Conventions

- **When to add an entry**: Refactors, tooling changes, architectural decisions, breaking changes, or anything you’d want to remember in 6 months.
- **Entry format**: `YYYY-MM-DD_slug.md` (e.g. `2025-02-05_build-memory-system.md`).
- **In MEMORY.md**: One line per entry: `- YYYY-MM-DD [title](entries/YYYY-MM-DD_slug.md) — one-line summary.`

## Index

<!-- Add new entries at the top -->

- 2026-02-17: [person-memory-skill-integration](entries/2026-02-17_person-memory-skill-integration.md) — Added stale-aware person memory refresh (`--if-stale-days`) and integrated usage guidance into meeting-prep, agenda, daily-plan, and week-plan workflows.

- 2026-02-17: [temporal-person-memory-v2](entries/2026-02-17_temporal-person-memory-v2.md) — Added person memory refresh from meetings (`arete people memory refresh`) with auto-managed highlights in person profiles, tests, and workflow/docs integration.

- 2026-02-16: [prd-archive-and-plan-migration](entries/2026-02-16_prd-archive-and-plan-migration.md) — Migrated PRD tracking to `dev/plans/`, archived legacy docs to `dev/archive/prds/`, and added transition cleanup follow-up.

- 2026-02-16: [plan-lifecycle-system-learnings](entries/2026-02-16_plan-lifecycle-system-learnings.md) — Plan lifecycle system: persistence, state machine, agent config, smart gates, widget. 16/16 tasks, 0 iterations, 137 extension tests. Pure module architecture for testability. Fixed pre-existing typecheck failure.

- 2026-02-16: [pi-dev-workflow-learnings](entries/2026-02-16_pi-dev-workflow-learnings.md) — Added Pi coding agent as additive dev workflow. 7/7 tasks, 0 iterations, 8 commits. Created .pi/ structure (settings, APPEND_SYSTEM.md, plan-mode extension, skills symlinks, agent definitions). Validation script confirms all components load. **Key patterns**: Symlinks maintain single source of truth; Pi jiti loader (no build step); compression functions need manual updates when adding dirs; fast model sufficient for infrastructure tasks.

- 2026-02-15: [monorepo-intelligence-refactor-learnings](entries/2026-02-15_monorepo-intelligence-refactor-learnings.md) — Full monorepo refactor: single-package → 3 packages (core, cli, runtime) with npm workspaces. 18/18 tasks, 0 iterations, 20 commits. Added intelligence enhancements: temporal queries (memory timeline), proactive context assembly (deep source search, inventory), entity relationships (findMentions, getRelationships). 275 files changed, +12.6K/-21.2K lines. **Key patterns**: Pre-mapped type dependency graph; compat shim incremental migration; createServices() single factory; phase-by-phase verification.

- 2026-02-14: [agents-md-compilation-system](entries/2026-02-14_agents-md-compilation-system.md) — Created modular source file system + build script for AGENTS.md compilation; achieved 6.45KB BUILD / 5.84KB GUIDE outputs (under 10KB target); replaced direct editing with `.agents/sources/` → `scripts/build-agents.ts` workflow; pipe-delimited compression following Vercel research (passive context > active retrieval); 16/16 tasks, 0/9 pre-mortem risks materialized. **Key patterns**: Source audience separation (shared/builder/guide); "DO NOT EDIT" prevention via generated headers; heuristic testing validates agent comprehension; documentation checklist prevents gaps.

- 2026-02-13 [Dev Cleanup Phase 1 Learnings](entries/2026-02-13_dev-cleanup-phase-1-learnings.md) — Reorganized build structure: memory to top-level, skills to .agents/skills/, autonomous to dev/autonomous/, removed arete-context.mdc. 15/15 tasks, 100% first-attempt, 0/8 pre-mortem risks materialized. **Key pattern**: Path mapping tables in refactor prompts; parallel subagent execution for simple moves; AGENTS.md gets ONE dedicated task.

- 2026-02-13 [Enhance Onboarding Tool Learnings](entries/2026-02-13_enhance-onboarding-tool-learnings.md) — Enhanced onboarding tool with best practices (9 Magic Words, Quick Win Finder, Trust Battery, Sacred Cows, anti-patterns). 9/9 tasks, 0/8 pre-mortem risks materialized, ~600 lines added. **Key patterns**: Sequential dependencies (tasks 1-3→5→8→9), show-don't-tell prompts, verification task as final gate.

- 2026-02-12 [Rules Architecture Refactor Learnings](entries/2026-02-12_rules-architecture-refactor-learnings.md) — Separated BUILDER and GUIDE rules; consolidated build practices in dev.mdc; trimmed AGENTS.md from 1,103 to 802 lines. 8/8 tasks, 0/8 pre-mortem risks materialized. **Key change**: `.cursor/rules/` now has only 6 BUILDER files; no overlap with `runtime/rules/`.

- 2026-02-13 [Multi-IDE Path Fix](entries/2026-02-13_multi-ide-path-fix.md) — Fixed "either/or" path patterns in canonical rules that broke after Claude adapter transformation. Added Multi-IDE Consistency checklist to Quality Practices. **Key pattern**: Use only `.cursor/` paths in canonical source; adapter transforms them.

- 2026-02-13 [Quality Practices Abstraction](entries/2026-02-13_quality-practices-abstraction.md) — Abstracted quality practices (pre-mortem, review, memory, quality gates) from PRD execution to all development work; decision tree for execution path selection; standalone run-pre-mortem skill. Pre-mortem: 7/8 risks prevented.

- 2026-02-13 [Tool Routing System](entries/2026-02-13_tool-routing-system.md) — Extended skill router to support lifecycle-based tools (onboarding, seed-context) with type/action/lifecycle metadata. Pre-mortem: 0/8 risks materialized. Symlink fix discovery. 465 tests passing.

- 2026-02-12 [Build skills consolidation and AGENTS.md directory structure](entries/2026-02-12_build-skills-consolidation-and-agents-dir.md) — Removed duplicate execute-prd from dev/autonomous/skills/; moved prd-to-json to dev/skills/. All build skills now in dev/skills/. Updated AGENTS.md Directory Structure tree to dev/ + runtime/ (was .cursor/build/).
- 2026-02-11 [Calendar provider macos alias and config alignment](entries/2026-02-11_calendar-provider-macos-alias.md) — Bug: configure wrote provider 'macos', pull expected 'ical-buddy'. Fix: factory accepts both. Regression test in pull-calendar; learning: config producer–consumer alignment, trace config flow, test at boundary.
- 2026-02-11 [Meeting Agenda Skill PRD learnings](entries/2026-02-11_meeting-agenda-skill-learnings.md) — 9/9 tasks, single-agent execution, prepare-meeting-agenda skill + template system; discoverability fix (skills table + PM action lists); post-completion dev entry was skipped → recommendation: mandatory Phase 3 step 20 checklist.
- 2026-02-11 [Calendar integration UX and learnings](entries/2026-02-11_calendar-integration-ux-and-learnings.md) — icalBuddy binary name fix, calendar list parsing (bullet lines only), checkbox + pageSize:12; entry added because fix was meaningful and learnings (UX parity, entries after fixes) were not captured initially.
- 2026-02-10 [Multi-IDE Support](entries/2026-02-10_multi-ide-support-learnings.md) — Adapter pattern for Cursor & Claude Code: canonical workspace with IDE-specific transpilation. Zero regressions, 50 new tests, 100% first-attempt success (19/20 tasks). Pre-mortem mitigations → 0/8 risks materialized. Learnings: show-don't-tell prompts + mandatory full test suite + sequential memory (progress.txt) = high quality with minimal iterations.
- 2026-02-10 [Doc completeness and file deletion safety](entries/2026-02-10_doc-completeness-and-file-deletion-safety.md) — Documentation Planning Checklist (now in dev.mdc); Documentation pre-mortem risk + mitigation in execute-prd; File Deletion Review (orchestrator) and File Deletion Policy (prd-task) to prevent undocumented deletions.
- 2026-02-10 [Multi-IDE documentation updates](entries/2026-02-10_multi-ide-documentation-updates.md) — README, SETUP, AGENTS, ONBOARDING, self-guided-onboarding backlog updated for `arete install --ide claude`; IDE selection section; path fixes (.agents/skills/).
- 2026-02-10 [PM Wisdom Integration Complete](entries/2026-02-10_pm-wisdom-integration-complete.md) — Top 25 high-priority concepts from 16 articles + 17 books implemented across 5 skills; light_pre_mortem pattern in PATTERNS.md; wisdom registry at dev/wisdom-registry.md; remaining 44 medium-priority on hold.
- 2026-02-10 [Auto-capture corrections without asking](entries/2026-02-10_auto-capture-corrections.md) — When builder corrects you: auto-add to Learnings + collaboration.md Corrections; no asking. Backlog subfolders (features/, improvements/) in dev.mdc; incident: put backlog in entries, then in backlog root.
- 2026-02-10 [Memory boundaries and path cleanup](entries/2026-02-10_memory-boundaries-and-path-cleanup.md) — Entries vs scratchpad vs backlog conventions explicit; replaced .cursor/build/ with dev/ in active docs and skills.
- 2026-02-10 [Synthesize improvement recommendations](entries/2026-02-10_synthesize-improvement-recommendations.md) — OSS (anthropics/user-research-synthesis, willoscar/synthesis-writer, 404kidwiz/knowledge-synthesizer) vs native synthesize: methodology (thematic analysis, affinity mapping, triangulation), anti-patterns, traceability, before/after examples, optional persona/opportunity sizing; 9 concrete recommendations for SKILL.md.
- 2026-02-10 [Skills enhancement backlog](backlog/improvements/skills-enhancement.md) — Phase 2 improvement recommendations: OSS skills offer methodology depth (frameworks, examples, anti-patterns, structured prompts) that native skills lack; Top 20 improvements prioritized (discovery + competitive-analysis = Phase 1); implementation can be incremental.
- 2026-02-09 [Synthesize improvement recommendations](entries/2026-02-10_synthesize-improvement-recommendations.md) — OSS (anthropics user-research-synthesis, willoscar synthesis-writer, knowledge-synthesizer) vs native: 9 recommendations including thematic analysis, triangulation, anti-patterns, traceability, claim quality examples, DoD, troubleshooting.
- 2026-02-09 [create-prd improvement recommendations](entries/2026-02-09_create-prd-improvement-recommendations.md) — OSS (awesome-copilot, ralph) vs native: quality standards (diff examples), strict schema, lettered questions, full worked example, AI-specific section, pre-save checklist, min 2 clarifying questions; 10 concrete recommendations.
- 2026-02-10 [Discovery improvement recommendations](entries/2026-02-10_discovery-improvement-recommendations.md) — OSS (majiayu000/product-discovery, parcadei/discovery-interview) vs native discovery: guardrails (Hard Rules, forbidden/allowed examples), Marty Cagan 10Q, OST, interview scaffolding, anti-patterns, evidence thresholds; 10 concrete recommendations for SKILL.md.
- 2026-02-10 [Skills evaluation learnings](entries/2026-02-10_skills-evaluation-learnings.md) — Ongoing: Phase 1 (keep vs replace): Integration is decisive factor; sidecar metadata has limits; methodology can be borrowed; orchestration pattern scales; Product OS thesis validated. Phase 2 (improvement recs): OSS excels at methodology depth, explicit guardrails, concrete scaffolding; orchestration pattern reused successfully.
- 2026-02-10 [Skills.sh evaluation synthesis](entries/2026-02-10_skills-sh-evaluation-synthesis.md) — Evaluated 5 runtime skills (create-prd, competitive-analysis, discovery, construct-roadmap, synthesize) vs skills.sh alternatives; Keep all native: project scaffolding, intelligence metadata, workspace integration cannot be replicated by OSS; OSS offers methodology depth that can inform enhancements.
- 2026-02-09 [Competitive analysis improvement recommendations](entries/2026-02-09_competitive-analysis-improvement-recommendations.md) — OSS comparison (1nf-sh competitor-teardown, anthropics competitive-analysis): 12 concrete recommendations including 6-layer framework, messaging matrix, battlecard, review mining, axis guidance, common mistakes, Areté research steps.
- 2026-02-09 [create-prd evaluation](entries/2026-02-09_create-prd-evaluation.md) — Evaluated native vs skills.sh PRD skills; Keep native: workspace integration, intelligence hooks, Product Leader persona; top OSS (awesome-copilot, ralph) lack project_template/context/QMD.
- 2026-02-09 [Repo reorganization](entries/2026-02-09_repo-reorganization.md) — runtime/ and dev/; single .agents/skills/; dropped override/reset/diff; copy-runtime build; getSourcePaths() dev vs compiled.
- 2026-02-09 [Skill install GitHub URL fix](entries/2026-02-09_skill-install-github-url-fix.md) — Fixed skill install to parse GitHub URLs (https://github.com/owner/repo); made `skill add` alias for `install` with `--skill` support; parseSkillSource() helper; 11 new tests.
- 2026-02-09: Builder Orchestration Learnings — orchestrator + subagent pattern for autonomous PRD execution; 12/12 tasks first-attempt, zero iterations → entries/2026-02-09_builder-orchestration-learnings.md
- 2026-02-09: Intelligence & Calendar — search providers, calendar integration → entries/2026-02-09_intelligence-and-calendar.md
- 2026-02-09 [Builder collaboration profile and mode-aware memory](entries/2026-02-09_builder-collaboration-profile.md) — Created .cursor/build/collaboration.md; reset product agent-observations template; rewrote agent-memory.mdc to route by BUILDER vs GUIDE mode; updated dev.mdc and MEMORY.md conventions.
- 2026-02-08 [Phase 4 (C–D): Skill ecosystem and docs](entries/2026-02-08_phase-4-skill-ecosystem-c-d.md) — arete skill install (skills.sh + local); .arete-meta.yaml sidecar; getSkillInfo reads sidecar; .cursor/skills/README.md; SETUP.md Customizing Skills; arete status context freshness; periodic-review references status; AGENTS.md skill management.
- 2026-02-08 [Phase 4 (A–B): Skill management and role defaults](entries/2026-02-08_phase-4-skill-management-a-b.md) — override/reset/diff/list UX; skills.defaults config; applySkillDefaults; arete skill defaults/set-default/unset-default; tests.
- 2026-02-07 [Phase 3: Intelligence services](entries/2026-02-07_phase-3-intelligence-services.md) — Context injection, memory retrieval, entity resolution, briefing assembly, enhanced skill router; CLI commands (arete context/memory/resolve/brief); pm-workspace rule update; 67 new tests.
- 2026-02-07 [Phase 2: Project templates](entries/2026-02-07_phase-2-project-templates.md) — Directory-based templates for discovery, definition, delivery, analysis, roadmap; README + phase guide + inputs/working/outputs; skill project_template alignment.
- 2026-02-07 [Phase 2: Skill refactoring](entries/2026-02-07_phase-2-skill-refactoring.md) — PATTERNS.md (get_meeting_context, extract_decisions_learnings); slimmed meeting-prep, daily-plan, process-meetings, sync, synthesize, finalize-project; extended frontmatter on all 18 skills.
- 2026-02-07 [Phase 1: Workspace restructure](entries/2026-02-07_phase-1-workspace-restructure.md) — now/, goals/, .arete/memory/ implemented; migration on update; all skills, rules, and src updated; tests pass.
- 2026-02-07 [Product OS architecture direction](entries/2026-02-07_product-os-architecture.md) — Five product primitives (Problem, User, Solution, Market, Risk); intelligence layer over skill library; workspace restructure (now/, goals/, .arete/memory/); adapter pattern for skills; project templates by work type.
- 2026-02-07 [Agent mode: BUILDER vs GUIDE](entries/2026-02-07_agent-mode-builder-guide.md) — agent_mode in arete.yaml; arete-context.mdc; install writes guide and copies only product rules; AGENT_MODE env override; dev/testing scoped to BUILDER.
- 2026-02-06 [Seed test-data: do not run locally](entries/2026-02-06_seed-test-data-no-local-run.md) — Agent and user should not run `arete seed test-data` in arete repo; check for accidental seed output after tasks; ask user before removing.
- 2026-02-06 [Meeting Intelligence PRD execution](entries/2026-02-06_meeting-intelligence-prd-execution.md) — meeting-prep and daily-plan skills; get_meeting_context pattern; docs updated.
- 2026-02-06 [PRD placement: build folder, not projects](entries/2026-02-06_prd-placement-build-not-projects.md) — Areté PRDs live in `.cursor/build/prds/`, not `projects/active/`; moved meeting-propagation and meeting-intelligence.
- 2026-02-06 [Meeting Propagation PRD execution](entries/2026-02-06_meeting-propagation-prd.md) — Template frontmatter, process-meetings skill, internal_email_domain config, docs.
- 2026-02-06 [PRD-task subagent and enriched instructions](entries/2026-02-06_prd-task-subagent-and-instructions.md) — Custom subagent `.cursor/agents/prd-task.md` for fresh context per task; execute-prd prefers it; instructions added for conventions, repo root, workspace-structure only-add, git, failure handling, Python test:py.
- 2026-02-06 [Context files on install](entries/2026-02-06_context-files-on-install.md) — Install/update now create context/ files (business-overview, goals-strategy, etc.) with placeholders; learning: canonical user-facing files in docs should be in DEFAULT_FILES.
- 2026-02-06 [Execute-PRD fallback when Task tool unavailable](entries/2026-02-06_execute-prd-fallback.md) — Documented fallback in execute-prd skill and autonomous README: when no Task/subagent tool exists, agent executes tasks in sequence with same quality gates and prd/progress updates.
- 2026-02-06 [PM Planning System PRD execution](entries/2026-02-06_pm-planning-system-execution.md) — Executed prd.json: four skills (quarter-plan, goals-alignment, week-plan, week-review), AGENTS.md §6 Planning System, SETUP.md and pm-workspace.mdc updates; branch feature/pm-planning-system, commit 191b9d7.
- 2026-02-06 [PM Planning System PRD and autonomous setup](entries/2026-02-06_pm-planning-system-prd-and-autonomous.md) — PRD and prd.json for PM planning (resources/plans, quarter/week skills); scratchpad automations and plan→execution feedback.
- 2026-02-06 [Update workspace structure backfill](entries/2026-02-06_update-workspace-structure-backfill.md) — arete update ensures missing workspace dirs and default files; single source of truth in workspace-structure.ts; existing workspaces get new structure (e.g. people/) on update.
- 2026-02-06 [People system](entries/2026-02-06_people-system.md) — People tracking (internal, customers, users); people/ dirs, index, core module, CLI (list/show/index); linking conventions for meetings and projects.
- 2026-02-06 [Autonomous agent loop system](entries/2026-02-06_autonomous-agent-loop.md) — Cursor-native autonomous execution for Areté development; prd-to-json and execute-prd skills; fresh Task subagents per task; progress tracking.
- 2026-02-06 [Shared meetings service and index update](entries/2026-02-06_meetings-service-and-index.md) — Core meetings module; Fathom refactor; arete meeting add; save-meeting skill; index auto-update on save.
- 2026-02-05 [Fathom Node migration & API URL fix](entries/2026-02-05_fathom-node-migration.md) — Fathom integration moved from Python to Node; External API base URL and URL() fix; fetch flow uses list-with-includes.
- 2025-02-05 [Build memory system](entries/2025-02-05_build-memory-system.md) — Added USER.md, MEMORY.md, build entries, and dev.mdc for Arete’s build process.
