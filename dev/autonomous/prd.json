{
  "name": "onboarding-improvements-phase3",
  "branchName": "feature/onboarding-improvements",
  "goal": "Implement Phase 3 enhancements for Stream B + C: improve context extraction quality, add configurable people-intelligence policy tuning, and ship optional enrichment with safe feature toggles.",
  "userStories": [
    {
      "id": "p3-b1-extraction-quality-baseline",
      "title": "Establish extraction quality baseline and acceptance corpus",
      "description": "Create a deterministic baseline corpus and scoring harness for Rapid Context Dump outputs to measure extraction quality before tuning.",
      "acceptanceCriteria": [
        "Baseline corpus fixtures exist for website, folder, and pasted text paths",
        "Quality checks cover draft completeness and evidence traceability",
        "A repeatable score/report format is documented in code comments or tests",
        "No behavior regression in existing Phase 1 draft workflow"
      ],
      "status": "complete",
      "passes": true,
      "attemptCount": 1
    },
    {
      "id": "p3-b2-extraction-tuning-improvements",
      "title": "Improve extraction and draft synthesis quality",
      "description": "Tune extraction heuristics and draft synthesis so draft context artifacts are higher signal with clearer source references.",
      "acceptanceCriteria": [
        "Extraction logic improves draft quality on baseline corpus",
        "Draft artifacts preserve explicit source/evidence references",
        "Fallback behavior remains non-blocking when one source is low quality",
        "Unit tests validate happy path + edge cases for tuned extraction"
      ],
      "status": "complete",
      "passes": true,
      "attemptCount": 1,
      "dependencies": [
        "p3-b1-extraction-quality-baseline"
      ]
    },
    {
      "id": "p3-c1-policy-config-surface",
      "title": "Add policy configuration for people-intelligence thresholds",
      "description": "Introduce configurable policy knobs for confidence threshold and routing behavior while preserving safe defaults.",
      "acceptanceCriteria": [
        "Policy config supports confidence threshold tuning with defaults",
        "Unknown queue behavior remains default-safe when config is missing",
        "Policy loading includes graceful fallback on invalid values",
        "Unit tests validate default, custom, and invalid-config scenarios"
      ],
      "status": "complete",
      "passes": true,
      "attemptCount": 1,
      "dependencies": [
        "p3-b2-extraction-tuning-improvements"
      ]
    },
    {
      "id": "p3-c2-enrichment-optional-mode",
      "title": "Implement optional enrichment pathway",
      "description": "Add optional enrichment inputs for better suggestions without making enrichment a release blocker.",
      "acceptanceCriteria": [
        "Enrichment path is opt-in and disabled by default",
        "System degrades gracefully when enrichment is unavailable",
        "Suggestion payload clearly indicates when enrichment was applied",
        "No forced coupling between enrichment and core classification flow"
      ],
      "status": "complete",
      "passes": true,
      "attemptCount": 1,
      "dependencies": [
        "p3-c1-policy-config-surface"
      ]
    },
    {
      "id": "p3-c3-feature-toggle-safety",
      "title": "Add feature toggles for Phase 3 enhancements",
      "description": "Guard Phase 3 extraction/enrichment behavior behind explicit toggles so Phase 1/2 behavior remains stable.",
      "acceptanceCriteria": [
        "Feature toggles exist for extraction tuning and enrichment mode",
        "Default toggle values preserve existing Phase 1/2 behavior",
        "Toggles can be enabled independently without cross-stream breakage",
        "Regression tests verify old behavior when toggles are off"
      ],
      "status": "complete",
      "passes": true,
      "attemptCount": 1,
      "dependencies": [
        "p3-c2-enrichment-optional-mode"
      ]
    },
    {
      "id": "p3-c4-metrics-trend-persistence",
      "title": "Persist KPI snapshots for trend review",
      "description": "Persist People Intelligence and Context Dump KPI snapshots so phase-gate reviews can evaluate week-over-week trends.",
      "acceptanceCriteria": [
        "Snapshot format stores timestamped KPI records",
        "Misclassification, triage burden, interruption, and extraction quality metrics are persisted",
        "Read path supports recent-trend retrieval for review",
        "Tests validate snapshot write/read and malformed data handling"
      ],
      "status": "complete",
      "passes": true,
      "attemptCount": 1,
      "dependencies": [
        "p3-c3-feature-toggle-safety"
      ]
    },
    {
      "id": "p3-integration-regression-suite",
      "title": "Expand integration tests for Phase 2+3 flows",
      "description": "Add integration tests that validate digest mode, unknown queue routing, contract fallback, and toggle-off backward compatibility for enhanced flows.",
      "acceptanceCriteria": [
        "New integration coverage exists for people intelligence digest end-to-end",
        "Integration coverage verifies unknown queue + internal classification with hints",
        "Integration coverage verifies graceful degradation without hints",
        "Integration coverage verifies backward compatibility when Phase 3 toggles are disabled"
      ],
      "status": "complete",
      "passes": true,
      "attemptCount": 1,
      "dependencies": [
        "p3-c4-metrics-trend-persistence"
      ]
    },
    {
      "id": "phase3-validation",
      "title": "Phase 3 full validation and quality gates",
      "description": "Run full validation for Phase 3 scope, including typecheck, full test suite, and all integration tests.",
      "acceptanceCriteria": [
        "npm run typecheck passes",
        "npm test passes",
        "All integration tests pass across core + cli integration directories",
        "Phase 3 enhancements do not break independent ship constraints from prior phases"
      ],
      "status": "complete",
      "passes": true,
      "attemptCount": 1,
      "dependencies": [
        "p3-integration-regression-suite"
      ]
    }
  ],
  "metadata": {
    "createdAt": "2026-02-18T12:10:00.000Z",
    "totalTasks": 8,
    "completedTasks": 8,
    "failedTasks": 0,
    "updatedAt": "2026-02-18T19:49:49.688Z",
    "completedAt": "2026-02-18T19:49:49.689Z"
  }
}
